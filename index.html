<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Quiz Buzzer</title>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<script>

const supabase = window.supabase.createClient(
"https://snayhpmkgnuwyfgzmbpi.supabase.co",
"sb_publishable_TVaiPvD2tRCGMXvfWBhKAg_7CXdSRL4"
);

</script>

<link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Nunito:wght@400;600;700;900&display=swap" rel="stylesheet">

<style>

body{
background:#0d0d0d;
color:white;
font-family:Nunito;
text-align:center;
padding:40px;
}

button{

padding:15px 30px;
font-size:20px;
cursor:pointer;
margin-top:20px;

}

</style>

</head>

<body>

<h1>QUIZ BUZZER</h1>

<input id="name" placeholder="Enter name">

<br>

<button onclick="becomeHost()">Become Host</button>

<button onclick="join()">Join</button>

<br><br>

<button onclick="buzz()" id="buzzBtn">BUZZ</button>

<h2 id="result"></h2>

<script>

let myName="";
let isHost=false;
let buzzLocked=false;

function becomeHost(){

myName=document.getElementById("name").value;

isHost=true;

listenBuzz();

alert("You are host now");

}


function join(){

myName=document.getElementById("name").value;

alert("You joined");

}



function listenBuzz(){

supabase

.channel("buzzers")

.on(

"postgres_changes",

{

event:"INSERT",

schema:"public",

table:"buzzers"

},

(payload)=>{

if(buzzLocked)return;

buzzLocked=true;

document.getElementById("result").innerText=

payload.new.name+" buzzed first";

}

)

.subscribe();

}



async function buzz(){

await supabase

.from("buzzers")

.insert({

name:myName,

time:new Date()

});

}



</script>

</body>

</html>
